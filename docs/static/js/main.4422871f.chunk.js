(this["webpackJsonpreact-movie-seat-booking"]=this["webpackJsonpreact-movie-seat-booking"]||[]).push([[0],{15:function(e,t,c){},16:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c(1),n=c.n(a),i=c(6),r=c.n(i),l=(c(15),Object(a.createContext)()),o=function(){var e=Object(a.useContext)(l),t=e.movies,c=e.saveMovie,n=e.getData,i=e.selectedMovie;Object(a.useEffect)((function(){n()}),[]);var r;return r=null!==i&&void 0!==t[i.index]?t[i.index].name:t[0].name,Object(s.jsxs)("div",{className:"movie-container",children:[Object(s.jsx)("label",{children:"Pick a movie: "}),Object(s.jsx)("select",{value:r,onChange:function(e){var s={index:e.target.selectedIndex,price:t[e.target.selectedIndex].price};c(s),n()},children:t.map((function(e){return Object(s.jsxs)("option",{value:e.name,"data-price":e.price,children:[e.name," ($",e.price,")"]},e.id)}))})]})},d=function(e){var t=e.id,c=e.occupeid,a=e.selected,n=e.onclick,i=["seat"];return c?i.push("occupeid"):a&&i.push("selected"),Object(s.jsx)("div",{className:i.join(" "),"data-id":t,onClick:n})},j=function(){return Object(s.jsxs)("ul",{className:"showcase",children:[Object(s.jsxs)("li",{children:[Object(s.jsx)(d,{}),Object(s.jsx)("small",{children:"N/A"})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)(d,{selected:!0}),Object(s.jsx)("small",{children:"Selected"})]}),Object(s.jsxs)("li",{children:[Object(s.jsx)(d,{occupeid:!0}),Object(s.jsx)("small",{children:"Occupeid"})]})]})},u=function(){return Object(s.jsx)("div",{className:"screen"})},O=c(7),b=function(){for(var e=[],t=Object(a.useContext)(l),c=t.addSeat,n=t.removeSeat,i=JSON.parse(localStorage.getItem("seatsId")),r=Object(a.useCallback)((function(e){e.target.classList.contains("selected")&&!e.target.classList.contains("occupeid")?(e.target.classList.remove("selected"),n(e.target.dataset.id)):e.target.classList.contains("selected")||e.target.classList.contains("occupeid")||(e.target.classList.add("selected"),c(e.target.dataset.id))}),[c,n]),o=function(e,t){return 1===e&&2===t||(1===e&&3===t||(2===e&&0===t||(2===e&&1===t||(3===e&&1===t||(3===e&&2===t||3===e&&3===t)))))},j=function(e,t){if(i){var c,s=Object(O.a)(i);try{for(s.s();!(c=s.n()).done;){if(+c.value===8*e+t+1)return!0}}catch(a){s.e(a)}finally{s.f()}}},u=0;u<6;u++){e[u]=[];for(var b=0;b<8;b++)e[u][b]=Object(s.jsx)(d,{id:8*u+b+1,occupeid:o(u,b),selected:j(u,b),onclick:r},8*u+b+1)}return Object(s.jsx)(s.Fragment,{children:e.map((function(e,t){return Object(s.jsx)("div",{className:"row",children:e.map((function(e,t){return e}))},t)}))})},v=function(){var e,t=Object(a.useContext)(l),c=t.seatsId,n=t.selectedMovie,i=t.movies;return e=null!==n?+n.price:+i[0].price,Object(s.jsx)("div",{className:"info",children:Object(s.jsxs)("p",{children:["You have selected ",Object(s.jsx)("span",{children:c?c.length:0})," seats for a price of $",Object(s.jsx)("span",{children:(c?c.length:0)*e})]})})};var p=function(){return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(o,{}),Object(s.jsx)(j,{}),Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)(u,{}),Object(s.jsx)(b,{})]}),Object(s.jsx)(v,{})]})},m=c(8),x=c(2),f=c(9),g="ADD_SEAT",h="REMOVE_SEAT",I="GET_DATA",S=function(e,t){switch(t.type){case g:var c=JSON.parse(localStorage.getItem("seatsId"));return console.log(c),c=c?[].concat(Object(f.a)(e.seatsId),[t.payload]):[t.payload],localStorage.setItem("seatsId",JSON.stringify(c)),Object(x.a)(Object(x.a)({},e),{},{seatsId:c});case h:var s=JSON.parse(localStorage.getItem("seatsId")),a=null!==s?s.filter((function(e){return e!==t.payload})):[];return localStorage.setItem("seatsId",JSON.stringify(a)),Object(x.a)(Object(x.a)({},e),{},{seatsId:s});case I:var n,i=JSON.parse(localStorage.getItem("seatsId"));return n=null===n?{index:0,price:e.movies[0].price}:JSON.parse(localStorage.getItem("selectedMovie")),null===i?(i=[],localStorage.setItem("seatsId",JSON.stringify([]))):i=JSON.parse(localStorage.getItem("seatsId")),Object(x.a)(Object(x.a)({},e),{},{selectedMovie:n,seatsId:i});default:return e}},N=function(e){var t=e.children,c=Object(a.useReducer)(S,{movies:[{id:0,name:"Interstaller",price:10},{id:1,name:"Scare Face",price:15},{id:2,name:"Good Fellas",price:8},{id:3,name:"God Father",price:20}],seatsId:[],selectedMovie:{}}),n=Object(m.a)(c,2),i=n[0],r=n[1];return Object(s.jsx)(l.Provider,{value:{movies:i.movies,selectedMovie:i.selectedMovie,seatsId:i.seatsId,addSeat:function(e){r({type:g,payload:e})},removeSeat:function(e){r({type:h,payload:e})},saveMovie:function(e){localStorage.setItem("selectedMovie",JSON.stringify(e))},getData:function(){r({type:I})}},children:t})};r.a.render(Object(s.jsx)(n.a.StrictMode,{children:Object(s.jsx)(N,{children:Object(s.jsx)(p,{})})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.4422871f.chunk.js.map