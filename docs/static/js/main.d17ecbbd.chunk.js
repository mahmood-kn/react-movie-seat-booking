(this["webpackJsonpreact-movie-seat-booking"]=this["webpackJsonpreact-movie-seat-booking"]||[]).push([[0],{15:function(e,t,s){},16:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s(1),n=s.n(a),i=s(6),r=s.n(i),l=(s(15),Object(a.createContext)()),o=function(){var e=Object(a.useContext)(l),t=e.movies,s=e.saveMovie,n=e.getData,i=e.selectedMovie;Object(a.useEffect)((function(){n()}),[]);var r;return r=null!==i&&void 0!==t[i.index]?t[i.index].name:t[0].name,Object(c.jsxs)("div",{className:"movie-container",children:[Object(c.jsx)("label",{children:"Pick a movie: "}),Object(c.jsx)("select",{value:r,onChange:function(e){var c={index:e.target.selectedIndex,price:t[e.target.selectedIndex].price};s(c),n()},children:t.map((function(e){return Object(c.jsxs)("option",{value:e.name,"data-price":e.price,children:[e.name," ($",e.price,")"]},e.id)}))})]})},d=function(e){var t=e.id,s=e.occupeid,a=e.selected,n=e.onclick,i=["seat"];return s?i.push("occupeid"):a&&i.push("selected"),Object(c.jsx)("div",{className:i.join(" "),"data-id":t,onClick:n})},j=function(){return Object(c.jsxs)("ul",{className:"showcase",children:[Object(c.jsxs)("li",{children:[Object(c.jsx)(d,{}),Object(c.jsx)("small",{children:"N/A"})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)(d,{selected:!0}),Object(c.jsx)("small",{children:"Selected"})]}),Object(c.jsxs)("li",{children:[Object(c.jsx)(d,{occupeid:!0}),Object(c.jsx)("small",{children:"Occupeid"})]})]})},u=function(){return Object(c.jsx)("div",{className:"screen"})},O=s(7),b=function(){for(var e=[],t=Object(a.useContext)(l),s=t.addSeat,n=t.removeSeat,i=JSON.parse(localStorage.getItem("seatsId")),r=Object(a.useCallback)((function(e){e.target.classList.contains("selected")&&!e.target.classList.contains("occupeid")?(e.target.classList.remove("selected"),n(e.target.dataset.id)):e.target.classList.contains("selected")||e.target.classList.contains("occupeid")||(e.target.classList.add("selected"),s(e.target.dataset.id))}),[s,n]),o=function(e,t){return 1===e&&2===t||(1===e&&3===t||(2===e&&0===t||(2===e&&1===t||(3===e&&1===t||(3===e&&2===t||3===e&&3===t)))))},j=function(e,t){if(i){var s,c=Object(O.a)(i);try{for(c.s();!(s=c.n()).done;){if(+s.value===8*e+t+1)return!0}}catch(a){c.e(a)}finally{c.f()}}},u=0;u<6;u++){e[u]=[];for(var b=0;b<8;b++)e[u][b]=Object(c.jsx)(d,{id:8*u+b+1,occupeid:o(u,b),selected:j(u,b),onclick:r},8*u+b+1)}return Object(c.jsx)(c.Fragment,{children:e.map((function(e,t){return Object(c.jsx)("div",{className:"row",children:e.map((function(e,t){return e}))},t)}))})},m=function(){var e,t=Object(a.useContext)(l),s=t.seatsId,n=t.selectedMovie,i=t.movies,r=t.seatsNum;return e=null!==n?+n.price:+i[0].price,Object(c.jsx)("div",{className:"info",children:Object(c.jsxs)("p",{children:["You have selected ",Object(c.jsx)("span",{children:s?s.length:0})," seats for a price of $",Object(c.jsx)("span",{children:r*e})]})})};var v=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(o,{}),Object(c.jsx)(j,{}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(u,{}),Object(c.jsx)(b,{})]}),Object(c.jsx)(m,{})]})},p=s(8),x=s(2),f=s(9),g="ADD_SEAT",h="REMOVE_SEAT",I="GET_DATA",S=function(e,t){switch(t.type){case g:var s=JSON.parse(localStorage.getItem("seatsId"));return s=s.length>0?[].concat(Object(f.a)(e.seatsId),[t.payload]):[t.payload],localStorage.setItem("seatsId",JSON.stringify(s)),Object(x.a)(Object(x.a)({},e),{},{seatsId:s,seatsNum:e.seatsNum+1});case h:var c=JSON.parse(localStorage.getItem("seatsId")),a=null!==c?c.filter((function(e){return e!==t.payload})):[];return localStorage.setItem("seatsId",JSON.stringify(a)),Object(x.a)(Object(x.a)({},e),{},{seatsId:c,seatsNum:e.seatsNum-1});case I:var n,i=JSON.parse(localStorage.getItem("seatsId"));return n=null===n?{index:0,price:e.movies[0].price}:JSON.parse(localStorage.getItem("selectedMovie")),null===i?(i=[],localStorage.setItem("seatsId",JSON.stringify([]))):i=JSON.parse(localStorage.getItem("seatsId")),Object(x.a)(Object(x.a)({},e),{},{selectedMovie:n,seatsId:i});default:return e}},N=function(e){var t=e.children,s=Object(a.useReducer)(S,{movies:[{id:0,name:"Interstaller",price:10},{id:1,name:"Scare Face",price:15},{id:2,name:"Good Fellas",price:8},{id:3,name:"God Father",price:20}],seatsId:[],seatsNum:0,selectedMovie:{}}),n=Object(p.a)(s,2),i=n[0],r=n[1];return Object(c.jsx)(l.Provider,{value:{movies:i.movies,selectedMovie:i.selectedMovie,seatsId:i.seatsId,seatsNum:i.seatsNum,addSeat:function(e){r({type:g,payload:e})},removeSeat:function(e){r({type:h,payload:e})},saveMovie:function(e){localStorage.setItem("selectedMovie",JSON.stringify(e))},getData:function(){r({type:I})}},children:t})};r.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(N,{children:Object(c.jsx)(v,{})})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.d17ecbbd.chunk.js.map